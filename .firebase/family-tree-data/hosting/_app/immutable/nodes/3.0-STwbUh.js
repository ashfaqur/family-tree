import{s as W,n as N,r as Le,h as Ge,e as me,y as ge,f as We,o as je,b as ze}from"../chunks/scheduler.i0dFsvd6.js";import{S as Z,i as K,c as b,f as _,h as c,b as P,A as we,l as Q,d as m,B as be,j as oe,s as F,w as O,k as p,m as ue,n as V,x as H,o as h,y as J,p as Me,t as S,u as xe,a as B,q as Ee,z as Y,C as Ae,D as Ze,g as $,e as ye,E as Ue,F as Ke,G as ee,H as te,I as Qe}from"../chunks/index.31dAlXuV.js";import{f as _e}from"../chunks/family-chart.PmrPTjn0.js";import{u as Oe,b as pe,g as Xe,c as $e,d as et,e as tt,G as at,f as lt,s as nt,a as rt}from"../chunks/firebase.J0uN4Hi4.js";function Ce(n){return n?.length!==void 0?n:Array.from(n)}const st=[{id:"1",data:{firstname:"John",lastname:"Smith",birthday:"23/03/2000",gender:"M",birth_place:"Jamnagar",death_date:""},rels:{father:"",mother:"",spouses:["2"],children:["3","4"]},main:!0},{id:"2",data:{firstname:"Jakie",lastname:"Smith",birthday:"01/03/2002",gender:"F",birth_place:"Johanabad",death_date:""},rels:{father:"",mother:"",spouses:["1"],children:["3","4"]},main:!1},{id:"3",data:{firstname:"Jobba",lastname:"Smith",birthday:"01/03/2010",gender:"M",birth_place:"Jobbabad",death_date:""},rels:{father:"1",mother:"2",spouses:[],children:[]},main:!1},{id:"4",data:{firstname:"Julia",lastname:"Smith",birthday:"01/03/2015",gender:"F",birth_place:"Jobbabad",death_date:""},rels:{father:"1",mother:"2",spouses:[],children:[]},main:!1}];function it(n,e){return n.length>e?`Max length is ${e} characters`:""}function ot(n){return/^[A-Za-zÄäÖöÜüß]*$/.test(n)?"":"Only alphabetical characters are allowed."}function ut(n){const e=/^\d{4}$/,t=/^(0?[1-9]|1[0-2])\/\d{4}$/,a=/^(0?[1-9]|[12]\d|3[01])\/(0?[1-9]|1[0-2])\/\d{4}$/;let l,r,i;if(e.test(n))i=parseInt(n,10);else if(t.test(n))[r,i]=n.split("/").map(Number);else if(a.test(n))[l,r,i]=n.split("/").map(Number);else return"Invalid date format.";const s=new Date().getFullYear();if(i<1e3||i>s)return"Year must be a valid four-digit number.";if(r&&(r<1||r>12))return"Month must be between 1 and 12.";if(l){const o=new Date(i,r,0).getDate();if(l<1||l>o)return`Day must be between 1 and ${o} for the month ${r}.`}return""}function ft(n){let e,t,a,l,r,i;return{c(){e=b("input"),this.h()},l(s){e=_(s,"INPUT",{class:!0,id:!0,type:!0,placeholder:!0,autocomplete:!0,"aria-invalid":!0,"aria-errormessage":!0}),this.h()},h(){c(e,"class",t="input input-bordered rounded-2xl input-info w-full placeholder:italic focus:outline-none focus:border-2 "+(n[3]?"input-info":"input-error")),c(e,"id",n[1]),c(e,"type","text"),c(e,"placeholder",n[2]),c(e,"autocomplete","off"),c(e,"aria-invalid",a=!n[3]),c(e,"aria-errormessage",l=n[4]?n[1]+"-error":void 0)},m(s,o){P(s,e,o),we(e,n[0]),r||(i=[Q(e,"input",n[11]),Q(e,"input",n[5])],r=!0)},p(s,[o]){o&8&&t!==(t="input input-bordered rounded-2xl input-info w-full placeholder:italic focus:outline-none focus:border-2 "+(s[3]?"input-info":"input-error"))&&c(e,"class",t),o&2&&c(e,"id",s[1]),o&4&&c(e,"placeholder",s[2]),o&8&&a!==(a=!s[3])&&c(e,"aria-invalid",a),o&18&&l!==(l=s[4]?s[1]+"-error":void 0)&&c(e,"aria-errormessage",l),o&1&&e.value!==s[0]&&we(e,s[0])},i:N,o:N,d(s){s&&m(e),r=!1,Le(i)}}}function ct(n,e,t){let{id:a}=e,{placeholder:l}=e,{value:r}=e,{maxLength:i=10}=e,{validateMaxLength:s=!1}=e,{validateTextAllowedAlphabet:o=!1}=e,{validateDateFormat:u=!1}=e,{isValid:f}=e,x=!0,g="";function d(y){const L=y.target.value,E=v(L);t(3,x=!E),t(4,g=E||""),f(E)}function v(y){let L="";return s&&(L=it(y,i),L)||o&&(L=ot(y),L)||u&&(L=ut(y),L)?L:""}function M(){r=this.value,t(0,r)}return n.$$set=y=>{"id"in y&&t(1,a=y.id),"placeholder"in y&&t(2,l=y.placeholder),"value"in y&&t(0,r=y.value),"maxLength"in y&&t(6,i=y.maxLength),"validateMaxLength"in y&&t(7,s=y.validateMaxLength),"validateTextAllowedAlphabet"in y&&t(8,o=y.validateTextAllowedAlphabet),"validateDateFormat"in y&&t(9,u=y.validateDateFormat),"isValid"in y&&t(10,f=y.isValid)},[r,a,l,x,g,d,i,s,o,u,f,M]}class dt extends Z{constructor(e){super(),K(this,e,ct,ft,W,{id:1,placeholder:2,value:0,maxLength:6,validateMaxLength:7,validateTextAllowedAlphabet:8,validateDateFormat:9,isValid:10})}}function Fe(n,{delay:e=0,duration:t=400,easing:a=Ge}={}){const l=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:a,css:r=>`opacity: ${r*l}`}}function Ve(n){let e,t,a,l,r;return{c(){e=b("div"),t=b("h2"),a=oe(n[8])},l(i){e=_(i,"DIV",{});var s=p(e);t=_(s,"H2",{});var o=p(t);a=ue(o,n[8]),o.forEach(m),s.forEach(m)},m(i,s){P(i,e,s),h(e,t),h(t,a),r=!0},p(i,s){(!r||s&256)&&Me(a,i[8])},i(i){r||(i&&We(()=>{r&&(l||(l=Ae(e,Fe,{duration:300},!0)),l.run(1))}),r=!0)},o(i){i&&(l||(l=Ae(e,Fe,{duration:300},!1)),l.run(0)),r=!1},d(i){i&&m(e),i&&l&&l.end()}}}function ht(n){let e,t,a,l,r,i,s,o,u;function f(d){n[10](d)}let x={id:n[2],placeholder:n[4],isValid:n[9],validateDateFormat:n[7],validateMaxLength:n[5],validateTextAllowedAlphabet:n[6]};n[0]!==void 0&&(x.value=n[0]),i=new dt({props:x}),me.push(()=>be(i,"value",f));let g=!n[1]&&Ve(n);return{c(){e=b("div"),t=b("label"),a=b("span"),l=oe(n[3]),r=F(),O(i.$$.fragment),o=F(),g&&g.c(),this.h()},l(d){e=_(d,"DIV",{class:!0});var v=p(e);t=_(v,"LABEL",{class:!0,for:!0});var M=p(t);a=_(M,"SPAN",{class:!0});var y=p(a);l=ue(y,n[3]),y.forEach(m),M.forEach(m),r=V(v),H(i.$$.fragment,v),o=V(v),g&&g.l(v),v.forEach(m),this.h()},h(){c(a,"class","label-text font-medium"),c(t,"class","label"),c(t,"for",n[2]),c(e,"class","form-control")},m(d,v){P(d,e,v),h(e,t),h(t,a),h(a,l),h(e,r),J(i,e,null),h(e,o),g&&g.m(e,null),u=!0},p(d,[v]){(!u||v&8)&&Me(l,d[3]),(!u||v&4)&&c(t,"for",d[2]);const M={};v&4&&(M.id=d[2]),v&16&&(M.placeholder=d[4]),v&258&&(M.isValid=d[9]),v&128&&(M.validateDateFormat=d[7]),v&32&&(M.validateMaxLength=d[5]),v&64&&(M.validateTextAllowedAlphabet=d[6]),!s&&v&1&&(s=!0,M.value=d[0],ge(()=>s=!1)),i.$set(M),d[1]?g&&(xe(),B(g,1,1,()=>{g=null}),Ee()):g?(g.p(d,v),v&2&&S(g,1)):(g=Ve(d),g.c(),S(g,1),g.m(e,null))},i(d){u||(S(i.$$.fragment,d),S(g),u=!0)},o(d){B(i.$$.fragment,d),B(g),u=!1},d(d){d&&m(e),Y(i),g&&g.d()}}}function mt(n,e,t){let{id:a}=e,{label:l}=e,{placeholder:r=""}=e,{value:i=""}=e,{valid:s=!0}=e,{validateMaxLength:o=!1}=e,{validateTextAllowedAlphabet:u=!1}=e,{validateDateFormat:f=!1}=e,x="";const g=v=>{v?(t(1,s=!1),t(8,x=v),console.log(v)):(t(1,s=!0),t(8,x=""))};function d(v){i=v,t(0,i)}return n.$$set=v=>{"id"in v&&t(2,a=v.id),"label"in v&&t(3,l=v.label),"placeholder"in v&&t(4,r=v.placeholder),"value"in v&&t(0,i=v.value),"valid"in v&&t(1,s=v.valid),"validateMaxLength"in v&&t(5,o=v.validateMaxLength),"validateTextAllowedAlphabet"in v&&t(6,u=v.validateTextAllowedAlphabet),"validateDateFormat"in v&&t(7,f=v.validateDateFormat)},[i,s,a,l,r,o,u,f,x,g,d]}class De extends Z{constructor(e){super(),K(this,e,mt,ht,W,{id:2,label:3,placeholder:4,value:0,valid:1,validateMaxLength:5,validateTextAllowedAlphabet:6,validateDateFormat:7})}}function vt(n){let e,t,a='<span class="label-text font-medium">Gender</span>',l,r,i,s,o,u,f="Male",x,g,d,v,M,y="Female",L,E,w;return L=Ze(n[2][0]),{c(){e=b("div"),t=b("label"),t.innerHTML=a,l=F(),r=b("div"),i=b("label"),s=b("input"),o=F(),u=b("span"),u.textContent=f,x=F(),g=b("label"),d=b("input"),v=F(),M=b("span"),M.textContent=y,this.h()},l(C){e=_(C,"DIV",{class:!0});var D=p(e);t=_(D,"LABEL",{class:!0,"data-svelte-h":!0}),$(t)!=="svelte-1a9ekgj"&&(t.innerHTML=a),l=V(D),r=_(D,"DIV",{class:!0});var j=p(r);i=_(j,"LABEL",{class:!0});var z=p(i);s=_(z,"INPUT",{type:!0,name:!0,class:!0}),o=V(z),u=_(z,"SPAN",{class:!0,"data-svelte-h":!0}),$(u)!=="svelte-5cy5so"&&(u.textContent=f),z.forEach(m),x=V(j),g=_(j,"LABEL",{class:!0});var k=p(g);d=_(k,"INPUT",{type:!0,name:!0,class:!0}),v=V(k),M=_(k,"SPAN",{class:!0,"data-svelte-h":!0}),$(M)!=="svelte-uyopfx"&&(M.textContent=y),k.forEach(m),j.forEach(m),D.forEach(m),this.h()},h(){c(t,"class","label"),c(s,"type","radio"),c(s,"name","gender"),s.__value="M",we(s,s.__value),c(s,"class","radio radio-primary"),c(u,"class","label-text ml-2"),c(i,"class","label cursor-pointer"),c(d,"type","radio"),c(d,"name","gender"),d.__value="F",we(d,d.__value),c(d,"class","radio radio-primary"),c(M,"class","label-text ml-2"),c(g,"class","label cursor-pointer"),c(r,"class","flex gap-4"),c(e,"class","form-control"),L.p(s,d)},m(C,D){P(C,e,D),h(e,t),h(e,l),h(e,r),h(r,i),h(i,s),s.checked=s.__value===n[0],h(i,o),h(i,u),h(r,x),h(r,g),h(g,d),d.checked=d.__value===n[0],h(g,v),h(g,M),E||(w=[Q(s,"change",n[1]),Q(d,"change",n[3])],E=!0)},p(C,[D]){D&1&&(s.checked=s.__value===C[0]),D&1&&(d.checked=d.__value===C[0])},i:N,o:N,d(C){C&&m(e),L.r(),E=!1,Le(w)}}}function gt(n,e,t){let{gender:a="M"}=e;const l=[[]];function r(){a=this.__value,t(0,a)}function i(){a=this.__value,t(0,a)}return n.$$set=s=>{"gender"in s&&t(0,a=s.gender)},[a,r,l,i]}class bt extends Z{constructor(e){super(),K(this,e,gt,vt,W,{gender:0})}}function Se(n){let e=n[3]()+"",t,a,l,r,i,s="✕",o,u,f,x="Edit Family Member",g,d,v,M,y,L,E,w,C,D,j,z,k,I,R,A,le="Cancel",fe,X,ve="Save",ce,ae,ne,de,he;d=new bt({props:{gender:n[2].gender}});function Je(T){n[12](T)}let Te={id:"firstname",label:"First Name",placeholder:"Enter first name",validateMaxLength:!0,validateTextAllowedAlphabet:!0};n[2].firstname!==void 0&&(Te.value=n[2].firstname),M=new De({props:Te}),me.push(()=>be(M,"value",Je));function Ye(T){n[13](T)}let ke={id:"lastname",label:"Last Name",placeholder:"Enter last name",validateMaxLength:!0,validateTextAllowedAlphabet:!0};n[2].lastname!==void 0&&(ke.value=n[2].lastname),E=new De({props:ke}),me.push(()=>be(E,"value",Ye));function qe(T){n[14](T)}let Ie={id:"birthday",label:"Birthday",placeholder:"DD/MM/YYYY",validateDateFormat:!0};n[2].birthday!==void 0&&(Ie.value=n[2].birthday),D=new De({props:Ie}),me.push(()=>be(D,"value",qe));let U=n[0]&&Re(n);return{c(){t=oe(e),a=F(),l=b("div"),r=b("div"),i=b("button"),i.textContent=s,o=F(),u=b("form"),f=b("h3"),f.textContent=x,g=F(),O(d.$$.fragment),v=F(),O(M.$$.fragment),L=F(),O(E.$$.fragment),C=F(),O(D.$$.fragment),z=F(),k=b("div"),U&&U.c(),I=F(),R=b("div"),A=b("button"),A.textContent=le,fe=F(),X=b("button"),X.textContent=ve,ce=F(),ae=b("div"),this.h()},l(T){t=ue(T,e),a=V(T),l=_(T,"DIV",{class:!0});var G=p(l);r=_(G,"DIV",{class:!0});var re=p(r);i=_(re,"BUTTON",{class:!0,"data-svelte-h":!0}),$(i)!=="svelte-axmhje"&&(i.textContent=s),o=V(re),u=_(re,"FORM",{class:!0});var q=p(u);f=_(q,"H3",{class:!0,"data-svelte-h":!0}),$(f)!=="svelte-wb3jwt"&&(f.textContent=x),g=V(q),H(d.$$.fragment,q),v=V(q),H(M.$$.fragment,q),L=V(q),H(E.$$.fragment,q),C=V(q),H(D.$$.fragment,q),z=V(q),k=_(q,"DIV",{class:!0});var se=p(k);U&&U.l(se),I=V(se),R=_(se,"DIV",{class:!0});var ie=p(R);A=_(ie,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),$(A)!=="svelte-z7xn1y"&&(A.textContent=le),fe=V(ie),X=_(ie,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),$(X)!=="svelte-pb8his"&&(X.textContent=ve),ie.forEach(m),se.forEach(m),q.forEach(m),re.forEach(m),ce=V(G),ae=_(G,"DIV",{class:!0}),p(ae).forEach(m),G.forEach(m),this.h()},h(){c(i,"class","btn btn-sm btn-circle absolute right-2 top-2"),c(f,"class","font-bold text-lg"),c(A,"type","button"),c(A,"class","btn btn-ghost"),c(X,"type","submit"),c(X,"class","btn btn-primary"),c(R,"class","modal-action"),c(k,"class","flex justify-between items-center"),c(u,"class","space-y-6"),c(r,"class","modal-box relative max-w-xl"),c(ae,"class","modal-backdrop bg-neutral bg-opacity-50"),c(l,"class","modal modal-open")},m(T,G){P(T,t,G),P(T,a,G),P(T,l,G),h(l,r),h(r,i),h(r,o),h(r,u),h(u,f),h(u,g),J(d,u,null),h(u,v),J(M,u,null),h(u,L),J(E,u,null),h(u,C),J(D,u,null),h(u,z),h(u,k),U&&U.m(k,null),h(k,I),h(k,R),h(R,A),h(R,fe),h(R,X),h(l,ce),h(l,ae),ne=!0,de||(he=[Q(i,"click",n[6]),Q(A,"click",n[6]),Q(u,"submit",Ue(n[4])),Q(ae,"click",Ke(n[6]))],de=!0)},p(T,G){const re={};G&4&&(re.gender=T[2].gender),d.$set(re);const q={};!y&&G&4&&(y=!0,q.value=T[2].firstname,ge(()=>y=!1)),M.$set(q);const se={};!w&&G&4&&(w=!0,se.value=T[2].lastname,ge(()=>w=!1)),E.$set(se);const ie={};!j&&G&4&&(j=!0,ie.value=T[2].birthday,ge(()=>j=!1)),D.$set(ie),T[0]?U?U.p(T,G):(U=Re(T),U.c(),U.m(k,I)):U&&(U.d(1),U=null)},i(T){ne||(S(d.$$.fragment,T),S(M.$$.fragment,T),S(E.$$.fragment,T),S(D.$$.fragment,T),ne=!0)},o(T){B(d.$$.fragment,T),B(M.$$.fragment,T),B(E.$$.fragment,T),B(D.$$.fragment,T),ne=!1},d(T){T&&(m(t),m(a),m(l)),Y(d),Y(M),Y(E),Y(D),U&&U.d(),de=!1,Le(he)}}}function Re(n){let e,t="Delete",a,l;return{c(){e=b("button"),e.textContent=t,this.h()},l(r){e=_(r,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),$(e)!=="svelte-j9okn2"&&(e.textContent=t),this.h()},h(){c(e,"type","button"),c(e,"class","btn btn-error btn-sm")},m(r,i){P(r,e,i),a||(l=Q(e,"click",n[5]),a=!0)},p:N,d(r){r&&m(e),a=!1,l()}}}function _t(n){let e,t,a=n[1]&&Se(n);return{c(){a&&a.c(),e=ye()},l(l){a&&a.l(l),e=ye()},m(l,r){a&&a.m(l,r),P(l,e,r),t=!0},p(l,[r]){l[1]?a?(a.p(l,r),r&2&&S(a,1)):(a=Se(l),a.c(),S(a,1),a.m(e.parentNode,e)):a&&(xe(),B(a,1,1,()=>{a=null}),Ee())},i(l){t||(S(a),t=!0)},o(l){B(a),t=!1},d(l){l&&m(e),a&&a.d(l)}}}function pt(n,e,t){let{familyMember:a}=e,{store:l}=e,{postSubmit:r}=e,{showModal:i=!1}=e,{closeModal:s=()=>{}}=e,{addRelationMember:o=null}=e,{addRelationType:u=null}=e,f={firstname:a?.data?.firstname||"",lastname:a?.data?.lastname||"",birthday:a?.data?.birthday||"",gender:a?.data?.gender||"M"};function x(){t(2,f={firstname:a?.data?.firstname||"",lastname:a?.data?.lastname||"",birthday:a?.data?.birthday||"",gender:a?.data?.gender||"M"}),console.log(`Add relation type: ${u}`)}function g(){console.log("handleSubmit"),a&&(d(),t(0,a.data={...a.data,...f},a),t(1,i=!1),r(),s())}function d(){if(o&&(u==="son"||u==="daughter")){const w=o.id,D=l.getData().find(j=>j.rels?.spouses?.includes(w));D&&(D.rels.children||(D.rels.children=[]),D.rels.children.push(a.id),o.data.gender==="M"?t(0,a.rels.mother=D.id,a):t(0,a.rels.father=D.id,a))}}function v(){t(1,i=!1),r({delete:!0}),s()}function M(){t(1,i=!1),s()}function y(w){n.$$.not_equal(f.firstname,w)&&(f.firstname=w,t(2,f))}function L(w){n.$$.not_equal(f.lastname,w)&&(f.lastname=w,t(2,f))}function E(w){n.$$.not_equal(f.birthday,w)&&(f.birthday=w,t(2,f))}return n.$$set=w=>{"familyMember"in w&&t(0,a=w.familyMember),"store"in w&&t(7,l=w.store),"postSubmit"in w&&t(8,r=w.postSubmit),"showModal"in w&&t(1,i=w.showModal),"closeModal"in w&&t(9,s=w.closeModal),"addRelationMember"in w&&t(10,o=w.addRelationMember),"addRelationType"in w&&t(11,u=w.addRelationType)},[a,i,f,x,g,v,M,l,r,s,o,u,y,L,E]}class wt extends Z{constructor(e){super(),K(this,e,pt,_t,W,{familyMember:0,store:7,postSubmit:8,showModal:1,closeModal:9,addRelationMember:10,addRelationType:11})}}function yt(n){let e,t,a,l,r;function i(o){n[8](o)}let s={familyMember:n[1],store:n[4],addRelationMember:n[2],addRelationType:n[3],postSubmit:n[5],closeModal:n[7]};return n[0]!==void 0&&(s.showModal=n[0]),a=new wt({props:s}),me.push(()=>be(a,"showModal",i)),{c(){e=b("div"),t=F(),O(a.$$.fragment),this.h()},l(o){e=_(o,"DIV",{id:!0,class:!0}),p(e).forEach(m),t=V(o),H(a.$$.fragment,o),this.h()},h(){c(e,"id","FamilyChart"),c(e,"class","f3 svelte-mr634z")},m(o,u){P(o,e,u),P(o,t,u),J(a,o,u),r=!0},p(o,[u]){const f={};u&2&&(f.familyMember=o[1]),u&16&&(f.store=o[4]),u&4&&(f.addRelationMember=o[2]),u&8&&(f.addRelationType=o[3]),u&1&&(f.closeModal=o[7]),!l&&u&1&&(l=!0,f.showModal=o[0],ge(()=>l=!1)),a.$set(f)},i(o){r||(S(a.$$.fragment,o),r=!0)},o(o){B(a.$$.fragment,o),r=!1},d(o){o&&(m(e),m(t)),Y(a,o)}}}function Mt(){return[t=>`${t.data.firstname||""} ${t.data.lastname||""}`,t=>`${t.data.birthday||""}`]}function xt(n,e,t){let{data:a}=e,l=!1,r=null,i=null,s=null,o=null,u;function f({datum:E,store:w,postSubmit:C}){t(2,i=null),t(3,s=null),t(1,r=E),t(4,o=w),t(0,l=!0),u=C}function x({datum:E,store:w,postSubmit:C,rel_datum:D,rel_type:j}){t(1,r=E),t(2,i=D),t(3,s=j),t(4,o=w),t(0,l=!0),u=C}function g(E){r&&o&&u(E),t(2,i=null),t(3,s=null)}const d=Mt(),v={w:220,h:70,text_x:75,text_y:15,img_w:60,img_h:60,img_x:5,img_y:5},M=[{type:"text",placeholder:"first name",key:"first name"},{type:"text",placeholder:"last name",key:"last name"},{type:"text",placeholder:"birthday",key:"birthday"},{type:"text",placeholder:"avatar",key:"avatar"}];je(()=>{const E=document.querySelector("#FamilyChart"),w=_e.createStore({data:a,node_separation:250,level_separation:150}),C=_e.d3AnimationView({store:w,cont:E,card_edit:M}),D=_e.handlers.AddRelative({store:w,cont:E,card_dim:v,cardEditForm:z=>x(z),labels:{mother:"Add mother"}}),j=_e.elements.Card({store:w,svg:C.svg,card_dim:v,cardEditForm:f,addRelative:D,card_display:d,mini_tree:!0,link_break:!1});C.setCard(j),w.setOnUpdate(z=>C.update(z||{})),w.update.tree({initial:!0})});const y=()=>{t(0,l=!1)};function L(E){l=E,t(0,l)}return n.$$set=E=>{"data"in E&&t(6,a=E.data)},[l,r,i,s,o,g,a,y,L]}class Et extends Z{constructor(e){super(),K(this,e,xt,yt,W,{data:6})}}function Dt(n){let e,t;return{c(){e=ee("svg"),t=ee("path"),this.h()},l(a){e=te(a,"svg",{xmlns:!0,viewBox:!0});var l=p(e);t=te(l,"path",{d:!0}),p(t).forEach(m),l.forEach(m),this.h()},h(){c(t,"d","M335.5 4l288 160c15.4 8.6 21 28.1 12.4 43.5s-28.1 21-43.5 12.4L320 68.6 47.5 220c-15.4 8.6-34.9 3-43.5-12.4s-3-34.9 12.4-43.5L304.5 4c9.7-5.4 21.4-5.4 31.1 0zM320 160a40 40 0 1 1 0 80 40 40 0 1 1 0-80zM144 256a40 40 0 1 1 0 80 40 40 0 1 1 0-80zm312 40a40 40 0 1 1 80 0 40 40 0 1 1 -80 0zM226.9 491.4L200 441.5l0 38.5c0 17.7-14.3 32-32 32l-48 0c-17.7 0-32-14.3-32-32l0-38.5L61.1 491.4c-6.3 11.7-20.8 16-32.5 9.8s-16-20.8-9.8-32.5l37.9-70.3c15.3-28.5 45.1-46.3 77.5-46.3l19.5 0c16.3 0 31.9 4.5 45.4 12.6l33.6-62.3c15.3-28.5 45.1-46.3 77.5-46.3l19.5 0c32.4 0 62.1 17.8 77.5 46.3l33.6 62.3c13.5-8.1 29.1-12.6 45.4-12.6l19.5 0c32.4 0 62.1 17.8 77.5 46.3l37.9 70.3c6.3 11.7 1.9 26.2-9.8 32.5s-26.2 1.9-32.5-9.8L552 441.5l0 38.5c0 17.7-14.3 32-32 32l-48 0c-17.7 0-32-14.3-32-32l0-38.5-26.9 49.9c-6.3 11.7-20.8 16-32.5 9.8s-16-20.8-9.8-32.5l36.3-67.5c-1.7-1.7-3.2-3.6-4.3-5.8L376 345.5l0 54.5c0 17.7-14.3 32-32 32l-48 0c-17.7 0-32-14.3-32-32l0-54.5-26.9 49.9c-1.2 2.2-2.6 4.1-4.3 5.8l36.3 67.5c6.3 11.7 1.9 26.2-9.8 32.5s-26.2 1.9-32.5-9.8z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"viewBox","0 0 640 512")},m(a,l){P(a,e,l),h(e,t)},p:N,i:N,o:N,d(a){a&&m(e)}}}class Lt extends Z{constructor(e){super(),K(this,e,null,Dt,W,{})}}function Tt(n){let e,t;return{c(){e=ee("svg"),t=ee("path"),this.h()},l(a){e=te(a,"svg",{xmlns:!0,viewBox:!0});var l=p(e);t=te(l,"path",{d:!0}),p(t).forEach(m),l.forEach(m),this.h()},h(){c(t,"d","M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"viewBox","0 0 488 512")},m(a,l){P(a,e,l),h(e,t)},p:N,i:N,o:N,d(a){a&&m(e)}}}class He extends Z{constructor(e){super(),K(this,e,null,Tt,W,{})}}function kt(n){let e,t,a,l,r,i,s;return a=new He({}),{c(){e=b("button"),t=b("div"),O(a.$$.fragment),l=oe(`
      Sign In`),this.h()},l(o){e=_(o,"BUTTON",{class:!0});var u=p(e);t=_(u,"DIV",{class:!0});var f=p(t);H(a.$$.fragment,f),f.forEach(m),l=ue(u,`
      Sign In`),u.forEach(m),this.h()},h(){c(t,"class","w-4 h-4 fill-blue-400"),c(e,"class","btn btn-primary min-h-10 h-10 min-w-28")},m(o,u){P(o,e,u),h(e,t),J(a,t,null),h(e,l),r=!0,i||(s=Q(e,"click",n[1]),i=!0)},p:N,i(o){r||(S(a.$$.fragment,o),r=!0)},o(o){B(a.$$.fragment,o),r=!1},d(o){o&&m(e),Y(a),i=!1,s()}}}function It(n){let e,t,a,l,r,i,s;return a=new He({}),{c(){e=b("button"),t=b("div"),O(a.$$.fragment),l=oe(`
      Sign out`),this.h()},l(o){e=_(o,"BUTTON",{class:!0});var u=p(e);t=_(u,"DIV",{class:!0});var f=p(t);H(a.$$.fragment,f),f.forEach(m),l=ue(u,`
      Sign out`),u.forEach(m),this.h()},h(){c(t,"class","w-4 h-4 fill-blue-400"),c(e,"class","btn btn-warning min-h-10 h-10 min-w-28")},m(o,u){P(o,e,u),h(e,t),J(a,t,null),h(e,l),r=!0,i||(s=Q(e,"click",n[2]),i=!0)},p:N,i(o){r||(S(a.$$.fragment,o),r=!0)},o(o){B(a.$$.fragment,o),r=!1},d(o){o&&m(e),Y(a),i=!1,s()}}}function At(n){let e,t,a,l;const r=[It,kt],i=[];function s(o,u){return o[0]?0:1}return t=s(n),a=i[t]=r[t](n),{c(){e=b("div"),a.c(),this.h()},l(o){e=_(o,"DIV",{class:!0});var u=p(e);a.l(u),u.forEach(m),this.h()},h(){c(e,"class","flex justify-end ml-3 mr-1")},m(o,u){P(o,e,u),i[t].m(e,null),l=!0},p(o,[u]){let f=t;t=s(o),t===f?i[t].p(o,u):(xe(),B(i[f],1,1,()=>{i[f]=null}),Ee(),a=i[t],a?a.p(o,u):(a=i[t]=r[t](o),a.c()),S(a,1),a.m(e,null))},i(o){l||(S(a),l=!0)},o(o){B(a),l=!1},d(o){o&&m(e),i[t].d()}}}function Ct(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function Ft(n,e,t){let a;ze(n,Oe,s=>t(0,a=s));async function l(s){await $e(et(tt,"users",s.uid),{uid:s.uid,displayName:s.displayName,email:s.email,photoURL:s.photoURL}),console.log(`User ${s.uid} added to Firestore`)}async function r(){const s=new at;try{if(Ct())await lt(pe,s);else{const o=await nt(pe,s);await l(o.user)}}catch(o){console.error("Auth error:",o),alert("Sign in failed. Please try again.")}}return je(async()=>{try{const s=await Xe(pe);s?.user&&await l(s.user)}catch(s){console.error("Redirect result error:",s)}}),[a,r,()=>rt(pe)]}class Vt extends Z{constructor(e){super(),K(this,e,Ft,At,W,{})}}function St(n){let e,t,a,l,r,i,s,o='<h1 class="text-3xl font-bold font-serif">Family Tree</h1>',u,f,x,g;return r=new Lt({}),x=new Vt({}),{c(){e=b("div"),t=b("div"),a=b("a"),l=b("div"),O(r.$$.fragment),i=F(),s=b("div"),s.innerHTML=o,u=F(),f=b("div"),O(x.$$.fragment),this.h()},l(d){e=_(d,"DIV",{class:!0});var v=p(e);t=_(v,"DIV",{class:!0});var M=p(t);a=_(M,"A",{class:!0,href:!0});var y=p(a);l=_(y,"DIV",{class:!0});var L=p(l);H(r.$$.fragment,L),L.forEach(m),y.forEach(m),M.forEach(m),i=V(v),s=_(v,"DIV",{class:!0,"data-svelte-h":!0}),$(s)!=="svelte-8gn2wm"&&(s.innerHTML=o),u=V(v),f=_(v,"DIV",{class:!0});var E=p(f);H(x.$$.fragment,E),E.forEach(m),v.forEach(m),this.h()},h(){c(l,"class","w-10 h-10"),c(a,"class","btn btn-ghost text-xl"),c(a,"href","/"),c(t,"class","navbar-start"),c(s,"class","navbar-center z-30"),c(f,"class","navbar-end"),c(e,"class","navbar bg-base-100 border-b-2")},m(d,v){P(d,e,v),h(e,t),h(t,a),h(a,l),J(r,l,null),h(e,i),h(e,s),h(e,u),h(e,f),J(x,f,null),g=!0},p:N,i(d){g||(S(r.$$.fragment,d),S(x.$$.fragment,d),g=!0)},o(d){B(r.$$.fragment,d),B(x.$$.fragment,d),g=!1},d(d){d&&m(e),Y(r),Y(x)}}}function Rt(n){return[]}class Bt extends Z{constructor(e){super(),K(this,e,Rt,St,W,{})}}function Nt(n){let e,t;return{c(){e=ee("svg"),t=ee("path"),this.h()},l(a){e=te(a,"svg",{xmlns:!0,viewBox:!0});var l=p(e);t=te(l,"path",{d:!0}),p(t).forEach(m),l.forEach(m),this.h()},h(){c(t,"d","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160L0 416c0 53 43 96 96 96l256 0c53 0 96-43 96-96l0-96c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7-14.3 32-32 32L96 448c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 64z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"viewBox","0 0 512 512")},m(a,l){P(a,e,l),h(e,t)},p:N,i:N,o:N,d(a){a&&m(e)}}}class Pt extends Z{constructor(e){super(),K(this,e,null,Nt,W,{})}}function jt(n){let e,t;return{c(){e=ee("svg"),t=ee("path"),this.h()},l(a){e=te(a,"svg",{xmlns:!0,viewBox:!0});var l=p(e);t=te(l,"path",{d:!0}),p(t).forEach(m),l.forEach(m),this.h()},h(){c(t,"d","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"viewBox","0 0 448 512")},m(a,l){P(a,e,l),h(e,t)},p:N,i:N,o:N,d(a){a&&m(e)}}}class zt extends Z{constructor(e){super(),K(this,e,null,jt,W,{})}}function Ut(n){let e,t;return{c(){e=ee("svg"),t=ee("path"),this.h()},l(a){e=te(a,"svg",{xmlns:!0,viewBox:!0});var l=p(e);t=te(l,"path",{d:!0}),p(t).forEach(m),l.forEach(m),this.h()},h(){c(t,"d","M48 96l0 320c0 8.8 7.2 16 16 16l320 0c8.8 0 16-7.2 16-16l0-245.5c0-4.2-1.7-8.3-4.7-11.3l33.9-33.9c12 12 18.7 28.3 18.7 45.3L448 416c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96C0 60.7 28.7 32 64 32l245.5 0c17 0 33.3 6.7 45.3 18.7l74.5 74.5-33.9 33.9L320.8 84.7c-.3-.3-.5-.5-.8-.8L320 184c0 13.3-10.7 24-24 24l-192 0c-13.3 0-24-10.7-24-24L80 80 64 80c-8.8 0-16 7.2-16 16zm80-16l0 80 144 0 0-80L128 80zm32 240a64 64 0 1 1 128 0 64 64 0 1 1 -128 0z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"viewBox","0 0 448 512")},m(a,l){P(a,e,l),h(e,t)},p:N,i:N,o:N,d(a){a&&m(e)}}}class Ot extends Z{constructor(e){super(),K(this,e,null,Ut,W,{})}}function Be(n,e,t){const a=n.slice();return a[7]=e[t],a}function Ne(n){let e,t,a="Projects:",l,r,i,s,o,u,f,x,g,d,v,M,y,L,E,w,C,D,j,z=Ce(n[1]),k=[];for(let I=0;I<z.length;I+=1)k[I]=Pe(Be(n,z,I));return d=new Ot({}),L=new Pt({}),D=new zt({}),{c(){e=b("div"),t=b("h2"),t.textContent=a,l=F(),r=b("div"),i=b("div"),s=oe(n[0]),o=F(),u=b("ul");for(let I=0;I<k.length;I+=1)k[I].c();f=F(),x=b("button"),g=b("div"),O(d.$$.fragment),v=F(),M=b("button"),y=b("div"),O(L.$$.fragment),E=F(),w=b("button"),C=b("div"),O(D.$$.fragment),this.h()},l(I){e=_(I,"DIV",{class:!0});var R=p(e);t=_(R,"H2",{"data-svelte-h":!0}),$(t)!=="svelte-38xxqe"&&(t.textContent=a),l=V(R),r=_(R,"DIV",{class:!0});var A=p(r);i=_(A,"DIV",{tabindex:!0,role:!0,class:!0});var le=p(i);s=ue(le,n[0]),le.forEach(m),o=V(A),u=_(A,"UL",{tabindex:!0,class:!0});var fe=p(u);for(let he=0;he<k.length;he+=1)k[he].l(fe);fe.forEach(m),A.forEach(m),f=V(R),x=_(R,"BUTTON",{class:!0});var X=p(x);g=_(X,"DIV",{class:!0});var ve=p(g);H(d.$$.fragment,ve),ve.forEach(m),X.forEach(m),v=V(R),M=_(R,"BUTTON",{class:!0});var ce=p(M);y=_(ce,"DIV",{class:!0});var ae=p(y);H(L.$$.fragment,ae),ae.forEach(m),ce.forEach(m),E=V(R),w=_(R,"BUTTON",{class:!0});var ne=p(w);C=_(ne,"DIV",{class:!0});var de=p(C);H(D.$$.fragment,de),de.forEach(m),ne.forEach(m),R.forEach(m),this.h()},h(){c(i,"tabindex","0"),c(i,"role","button"),c(i,"class","btn m-1 min-w-52 flex justify-start hover:bg-base-200"),c(u,"tabindex","0"),c(u,"class","dropdown-content menu bg-base-100 rounded-box z-30 w-52 p-2 shadow"),c(r,"class","dropdown"),c(g,"class","w-6 h-6"),c(x,"class","btn min-h-10 h-10"),c(y,"class","w-6 h-6"),c(M,"class","btn min-h-10 h-10"),c(C,"class","w-6 h-6"),c(w,"class","btn min-h-10 h-10"),c(e,"class","flex flex-row justify-start items-center space-x-1 bg-base-100")},m(I,R){P(I,e,R),h(e,t),h(e,l),h(e,r),h(r,i),h(i,s),h(r,o),h(r,u);for(let A=0;A<k.length;A+=1)k[A]&&k[A].m(u,null);n[6](r),h(e,f),h(e,x),h(x,g),J(d,g,null),h(e,v),h(e,M),h(M,y),J(L,y,null),h(e,E),h(e,w),h(w,C),J(D,C,null),j=!0},p(I,R){if((!j||R&1)&&Me(s,I[0]),R&18){z=Ce(I[1]);let A;for(A=0;A<z.length;A+=1){const le=Be(I,z,A);k[A]?k[A].p(le,R):(k[A]=Pe(le),k[A].c(),k[A].m(u,null))}for(;A<k.length;A+=1)k[A].d(1);k.length=z.length}},i(I){j||(S(d.$$.fragment,I),S(L.$$.fragment,I),S(D.$$.fragment,I),j=!0)},o(I){B(d.$$.fragment,I),B(L.$$.fragment,I),B(D.$$.fragment,I),j=!1},d(I){I&&m(e),Qe(k,I),n[6](null),Y(d),Y(L),Y(D)}}}function Pe(n){let e,t,a=n[7]+"",l,r,i,s;function o(){return n[5](n[7])}return{c(){e=b("li"),t=b("a"),l=oe(a),r=F()},l(u){e=_(u,"LI",{});var f=p(e);t=_(f,"A",{});var x=p(t);l=ue(x,a),x.forEach(m),r=V(f),f.forEach(m)},m(u,f){P(u,e,f),h(e,t),h(t,l),h(e,r),i||(s=Q(t,"click",Ue(o)),i=!0)},p(u,f){n=u,f&2&&a!==(a=n[7]+"")&&Me(l,a)},d(u){u&&m(e),i=!1,s()}}}function Ht(n){let e,t,a=n[3]&&Ne(n);return{c(){a&&a.c(),e=ye()},l(l){a&&a.l(l),e=ye()},m(l,r){a&&a.m(l,r),P(l,e,r),t=!0},p(l,[r]){l[3]?a?(a.p(l,r),r&8&&S(a,1)):(a=Ne(l),a.c(),S(a,1),a.m(e.parentNode,e)):a&&(xe(),B(a,1,1,()=>{a=null}),Ee())},i(l){t||(S(a),t=!0)},o(l){B(a),t=!1},d(l){l&&m(e),a&&a.d(l)}}}function Jt(n,e,t){let a;ze(n,Oe,f=>t(3,a=f));let{projects:l=["Default"]}=e,{selectedProject:r="Default"}=e,i;function s(f){if(t(0,r=f),i){const x=document.activeElement;x&&x.blur(),i.blur()}}const o=f=>s(f);function u(f){me[f?"unshift":"push"](()=>{i=f,t(2,i)})}return n.$$set=f=>{"projects"in f&&t(1,l=f.projects),"selectedProject"in f&&t(0,r=f.selectedProject)},[r,l,i,a,s,o,u]}class Yt extends Z{constructor(e){super(),K(this,e,Jt,Ht,W,{projects:1,selectedProject:0})}}function qt(n){let e,t,a,l,r,i,s,o;return t=new Bt({}),l=new Yt({}),s=new Et({props:{data:st}}),{c(){e=b("div"),O(t.$$.fragment),a=F(),O(l.$$.fragment),r=F(),i=b("div"),O(s.$$.fragment),this.h()},l(u){e=_(u,"DIV",{class:!0});var f=p(e);H(t.$$.fragment,f),a=V(f),H(l.$$.fragment,f),r=V(f),i=_(f,"DIV",{class:!0});var x=p(i);H(s.$$.fragment,x),x.forEach(m),f.forEach(m),this.h()},h(){c(i,"class","h-full w-auto"),c(e,"class","flex flex-col min-w-80 h-screen bg-[#3b5560]")},m(u,f){P(u,e,f),J(t,e,null),h(e,a),J(l,e,null),h(e,r),h(e,i),J(s,i,null),o=!0},p:N,i(u){o||(S(t.$$.fragment,u),S(l.$$.fragment,u),S(s.$$.fragment,u),o=!0)},o(u){B(t.$$.fragment,u),B(l.$$.fragment,u),B(s.$$.fragment,u),o=!1},d(u){u&&m(e),Y(t),Y(l),Y(s)}}}class Qt extends Z{constructor(e){super(),K(this,e,null,qt,W,{})}}export{Qt as component};
